(()=>{"use strict";var t=function(t,a,e){for(var r=e.map((function(a){return a[t]})),n=e.map((function(t){return t[a]})),c=r.reduce((function(t,a){return t+a}),0)/r.length,o=n.reduce((function(t,a){return t+a}),0)/n.length,l=0,i=0,s=0,d=0;d<r.length;d++){var u=r[d]-c,f=n[d]-o;l+=u*f,i+=Math.pow(u,2),s+=Math.pow(f,2)}return l/Math.sqrt(i*s)},a=function(a,e){for(var r=new Array,n=0;n<e.length;n++)for(var c=0;c<e.length;c++){var o=e[n],l=e[c];if("Sex"!==o&&"Sex"!==l){var i=t(o,l,a);r.push({keyX:o,keyY:l,r:i})}}return r},e=function(t,a){return a*t};function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,a){if(t){if("string"==typeof t)return n(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,a):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var c=d3,o=c.select,l=(c.csv,c.text),i=c.scaleLinear,s=(c.extent,c.axisLeft),d=c.axisBottom,u=(c.format,c.line,c.mouse,c.transition,c.scaleBand),f=["Male Abalone","Female Abalone","Infant Abalone"],p=o("svg"),v=796,x=function(t,a,e,r){for(var n=new Array,c=t.length-1;c>=0;c--)n.push(t[c]);var l=o("svg").append("g"),f=u().domain(t.filter((function(t){return"Sex"!==t}))).range([0,e]).padding(.05),p=d(f).tickPadding(-10);l.append("g").attr("class","x-axis").attr("transform","translate(".concat(0,",",e,")")).call(p).selectAll(".x-axis .tick text").attr("x",-10);var v=u().domain(n.filter((function(t){return"Sex"!==t}))).range([e,0]).padding(.05),x=s(v);l.append("g").attr("class","y-axis").attr("transform","translate(".concat(0,",",0,")")).call(x),l.selectAll(".tick line").remove(),l.selectAll(".domain").remove();var h=i().domain([-1,-.5,0,.5,1]).range(["#000814","#001d3d","#001d3d","#003566","#90e0ef"]);return l.selectAll("rect").data(a,(function(t){return t})).enter().append("rect").attr("class","data-rect").attr("x",(function(t){return f(t.keyX)})).attr("y",(function(t){return v(t.keyY)})).attr("rx",5).attr("ry",5).attr("width",f.bandwidth()).attr("height",v.bandwidth()).attr("fill",(function(t){return h(t.r)})).each((function(t){var a=o(this),e=parseFloat(a.attr("x"))+f.bandwidth()/2,r=parseFloat(a.attr("y"))+v.bandwidth()/2,n=t.r<.85?"white":"black",c=l.append("text").attr("x",e).attr("y",r).attr("dy",".35em").attr("class","data-rect-text").attr("text-anchor","middle").style("fill","".concat(n)).style("font-size","10px").text(t.r%1==0?Math.round(t.r):d3.format(".2f")(t.r));a.on("mouseenter",(function(){c.classed("data-rect-text-active",!0),a.classed("data-rect-active",!0)})),a.on("mouseleave",(function(){c.classed("data-rect-text-active",!1),a.classed("data-rect-active",!1)})),c.on("mouseenter",(function(){c.classed("data-rect-text-active",!0),a.classed("data-rect-active",!0)})),c.on("mouseleave",(function(){c.classed("data-rect-text-active",!1),a.classed("data-rect-active",!1)})),a.on("click",(function(){var t=c.classed("data-rect-text-clicked");c.classed("data-rect-text-clicked",!t)})),c.on("click",(function(){var t=c.classed("data-rect-text-clicked");c.classed("data-rect-text-clicked",!t)}))})),l.append("text").attr("class","h2-title").attr("y",-10).text(r),l.style("opacity",0).transition().duration(1e3).style("opacity",1),l};l("http://vis.lab.djosix.com:2024/data/abalone.data").then((function(t){var n=t.split("\n").map((function(t){var a=t.split(",");return{Sex:a[0],Length:+a[1],Diameter:+a[2],Height:+a[3],"Whole Weight":+a[4],"Shucked Weight":+a[5],"Viscera Weight":+a[6],"Shell Weight":+a[7],Rings:+a[8]}})),c=[],l=[],s=[],u=function(t){var a=t[0];return Object.keys(a).filter((function(t){return"class"!==t}))}(n);n.filter((function(t){return isNaN(null==t?void 0:t.Sex)})).forEach((function(t){"M"===(null==t?void 0:t.Sex)?c.push(t):"F"===(null==t?void 0:t.Sex)?l.push(t):"I"===(null==t?void 0:t.Sex)&&s.push(t)}));var h=a(c,u),y=a(l,u),m=a(s,u);!function(t,a){p.selectAll("*").remove(),function(t,a){for(var r=new Array,n=a.length-1;n>=0;n--)r.push(a[n]);var c=e(v,.085),l=e(v,.24),s=40+e(v,.11),u=c+l+s,h=c+l+u,y=40+e(v,.5)+c-36,m=176+e(472,.11)+l+80+20,g=m-24;p.append("text").attr("class","title").attr("y",64).attr("x",40).text("Exploring Abalone Attributes: Correlation Matrices for Males, Females, and Infants").style("opacity",0).transition().duration(1e3).style("opacity",1),x(a,t[0],220,f[0]).attr("transform","translate(".concat(s,", ").concat(134,")"));var b=x(a,t[1],220,f[1]);b.attr("transform","translate(".concat(u,", ").concat(134,")")),b.selectAll(".y-axis .tick text").remove();var A=x(a,t[2],220,f[2]);A.attr("transform","translate(".concat(h,", ").concat(134,")")),A.selectAll(".y-axis .tick text").remove(),function(){var t=o("svg").append("g");return t.append("text").attr("class","note-label").attr("x",0).attr("y",0).text("Notices"),["- Click on a cell to toggle the visibility of its value (show/hide).","- Hover over a cell to display its value and highlight the cell."].forEach((function(a,e){var r=e+1;t.append("text").attr("class","note-label-item").attr("x",0).attr("y",20*r).text(a)})),t}().attr("transform","translate(".concat(40,", ").concat(g,")")),function(t,a){var e=o("svg").append("g"),r=e.append("defs").append("linearGradient").attr("id","colorGradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%"),n=[-1,-.5,0,.5,1];n.forEach((function(a,e){r.append("stop").attr("offset","".concat(e/(n.length-1)*100,"%")).style("stop-color",t[e]).style("stop-opacity",1)}));var c=i().domain([-1,1]).range([0,a]),l=d(c).tickValues([-1,-.5,0,.5,1]).tickFormat(d3.format(".1f")),s=e.append("g").attr("class","color-axis").call(l);return s.selectAll(".tick line").remove(),s.selectAll(".domain").remove(),e.append("rect").attr("class","color-rect").attr("x",0).attr("y",-12).attr("width",a).attr("height",15).attr("fill","url(#colorGradient)"),e.append("text").attr("class","h2-title-color").attr("x",0).attr("y",-25).text("Value Scale"),e.style("opacity",0).transition().duration(1e3).style("opacity",1),e}(["#000814","#001d3d","#001d3d","#003566","#90e0ef"],e(v,.5)).attr("transform","translate(".concat(y,", ").concat(m,")"))}(t,a)}([r(h),r(y),r(m)],u)}))})();
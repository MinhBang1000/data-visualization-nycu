(()=>{"use strict";var t=function(t,e,a){for(var n=[],s=a,l=t;l<=e;l++)0!==a&&l!==t||(n.push(l),a=s),a--;return n},e=d3,a=e.select,n=e.csv,s=e.scaleLinear,l=(e.extent,e.axisLeft),r=e.axisBottom,i=(e.format,e.line),c=(e.mouse,e.transition,a("svg")),o=+c.attr("width"),d=+c.attr("height"),u=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n||(n=function(t){var e=t[0];return Object.keys(e).filter((function(t){return"class"!==t}))}(e)),c.selectAll("*").remove(),function(e,n){var p={"Iris-setosa":"#3CB371","Iris-versicolor":"#FF6347","Iris-virginica":"#4B0082"},h=o-100-80,f=d-100-150,x=function(t){var e=t[0],a=Object.keys(e).filter((function(t){return"class"!==t})),n=t[0][a[0]],s=t[0][a[0]];return t.forEach((function(t){a.forEach((function(e){n=n<t[e]?n:t[e]})),a.forEach((function(e){s=s>t[e]?s:t[e]}))})),{max:Math.round(s),min:Math.round(n)}}(e),m=t(x.min,x.max,1),v=t(0,n.length-1,1),g=c.append("g").attr("transform","translate(".concat(100,", ").concat(100,")")),y=s().domain([0,n.length-1]).range([50,h-150]),k={};null==n||n.forEach((function(t){k[t]=s().domain([x.min,x.max]).range([f,0]).nice()}));var b=n[0],w=l(k[b]).tickPadding(10).tickSize(100-h).tickValues(m),A=g.append("g").attr("transform","translate(0, 0)").call(w);A.append("text").attr("class","axis-label").attr("y",-40).attr("x",10).attr("transform","rotate(-90)").attr("text-anchor","middle").text("Value");var N=r(y).tickPadding(20).tickSize(-f).tickValues(v).tickFormat((function(t,e){return n[e]})),E=g.append("g").attr("transform","translate(0, ".concat(k[b](x.min),")")).call(N);E.append("text").attr("class","axis-label").attr("y",60).attr("x",h-100).text("Variable"),E.selectAll(".domain").remove(),A.selectAll(".domain").remove();var z=i().x((function(t,e){return y(e)})).y((function(t,e){return k[n[e]](t)}));g.selectAll("path").data(e).enter().append("path").attr("fill","none").attr("class",(function(t){return"".concat(t.class," data-line")})).attr("stroke",(function(t){return p[t.class]})).attr("stroke-width",2).style("opacity",0).transition().duration(500).style("opacity",.3).attr("d",(function(t){return z(n.map((function(e){return t[e]})))}));var S=Object.keys(p),V=g.append("g").attr("class","legend").attr("transform","translate(".concat(h-50,", ").concat(f/2,")"));V.append("text").attr("class","legend-label").attr("y",-20).attr("x",0).text("Species"),S.forEach((function(t,e){var n=V.append("g").attr("transform","translate(0, ".concat(20*e,")")).style("cursor","pointer");n.append("rect").attr("width",10).attr("height",3).attr("fill",p[t]),n.append("text").attr("x",15).attr("y",5).text(t.replace(/-/g," ")),n.on("mouseenter",(function(e,n){a(this).select("text").classed("selected-text",!0),g.selectAll(".".concat(t)).classed("selected-data",!0)})).on("mouseleave",(function(e,n){a(this).select("text").classed("selected-text",!1),g.selectAll(".".concat(t)).classed("selected-data",!1)}))})),g.append("text").attr("class","title").attr("y",-40).text("Parallel Coordinates Visualization of Sepal and Petal Dimensions Across Iris Species");var j=null;E.selectAll(".tick").on("mouseenter",(function(t,e){a(this).select("line").classed("hovered-line",!0),a(this).select("text").classed("hovered-text",!0)})).on("mouseleave",(function(t,e){a(this).select("line").classed("hovered-line",!1),a(this).select("text").classed("hovered-text",!1)})),E.selectAll(".tick").on("click",(function(t,s){if(a(this).select("line").classed("selected-line",!1),a(this).select("text").classed("selected-text",!1),j||0===j){var l=n[j];n[j]=n[s],n[s]=l,j=null,u(e,n)}else j=s,a(this).select("line").classed("selected-line",!0),a(this).select("text").classed("selected-text",!0)}));var I=g.append("g").attr("transform","translate(".concat(0,", ",f+75,")"));I.append("text").attr("class","note-label").attr("x",0).attr("y",0).style("font-size","16px").style("font-weight","bold").text("Notices"),["- Click on two labels to switch their positions","- Hover over a species to highlight it"].forEach((function(t,e){var a=e+1;I.append("text").attr("class","note-label note-item").attr("x",0).attr("y",20*a).style("font-size","14px").style("fill","#555").text(t)}))}(e,n)};n("http://vis.lab.djosix.com:2024/data/iris.csv").then((function(t){t.forEach((function(t){t["sepal length"]=+t["sepal length"],t["sepal width"]=+t["sepal width"],t["petal length"]=+t["petal length"],t["petal width"]=+t["petal width"]}));var e=t.filter((function(t){return!(isNaN(t["sepal length"])||isNaN(t["sepal width"])||isNaN(t["petal length"])||isNaN(t["sepal width"]))}));u(e)}))})();